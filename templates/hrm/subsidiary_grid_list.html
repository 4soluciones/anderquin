{% if subsidiary_set %}
<div class="table-responsive rounded" style="background: #fff; border-radius: 12px; border: 1px solid #bbdefb; overflow: hidden;">
    <table id="ss-data-grid" class="table table-hover table-bordered mb-0 roboto-condensed-regular" cellspacing="0" width="100%" style="border-color: #bbdefb;">
        <thead>
            <tr class="text-center text-uppercase" style="background: linear-gradient(180deg, #bbe0f5 0%, #90caf9 100%); color: #0d47a1;">
                <th class="border-0 py-3 font-weight-bold" style="width: 3rem;">#</th>
                <th class="border-0 py-3 font-weight-bold" style="width: 5rem;">Tipo</th>
                <th class="border-0 py-3 font-weight-bold" style="width: 5rem;">Serie</th>
                <th class="border-0 py-3 font-weight-bold text-left" style="min-width: 10rem;">Sede</th>
                <th class="border-0 py-3 font-weight-bold text-left" style="min-width: 15rem;">Dirección</th>
                <th class="border-0 py-3 font-weight-bold" style="width: 10rem;">Distrito</th>
                <th class="border-0 py-3 font-weight-bold" style="width: 5rem;">Ubigeo</th>
                <th class="border-0 py-3 font-weight-bold" style="width: 6rem;">Principal</th>
                <th class="border-0 py-3 font-weight-bold" style="width: 5rem;">Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for s in subsidiary_set %}
            <tr class="{% if s.is_address %}table-info{% endif %}">
                <td class="text-center align-middle">{{ forloop.counter }}</td>
                <td class="text-center align-middle">
                    <span class="badge {% if s.is_address %}badge-info{% else %}badge-primary{% endif %} py-2 px-2" style="font-size: 0.7rem;">
                        {% if s.is_address %}DIRECCIÓN{% else %}SEDE{% endif %}
                    </span>
                </td>
                <td class="align-middle text-center">{{ s.serial|default_if_none:'-' }}</td>
                <td class="align-middle font-weight-bold" style="color: #1565c0;">{{ s.name }}</td>
                <td class="align-middle small text-muted">{{ s.address }}</td>
                <td class="align-middle text-center">{{ s.district.description }}</td>
                <td class="align-middle text-center">{{ s.district.ubigeo }}</td>
                <td class="align-middle text-center">
                    {% if s.is_main %}
                    <span class="badge badge-success py-2 px-2"><i class="fas fa-check"></i> Principal</span>
                    {% else %}
                    <span class="text-muted small">—</span>
                    {% endif %}
                </td>
                <td class="align-middle text-center">
                    <button class="btn btn-sm btn-edit-subsidiary btn-outline-primary py-1 px-2" pk="{{ s.id }}" style="border-radius: 8px;" title="Editar sede">
                        <i class="fas fa-edit"></i>
                    </button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="card border-0 shadow-sm text-center py-5" style="background: #fff; border-radius: 12px; border: 1px solid #bbdefb;">
    <i class="fas fa-building fa-3x mb-3" style="color: #90caf9;"></i>
    <h5 class="font-weight-bold mb-2" style="color: #0d47a1;">No hay sedes registradas</h5>
    <p class="text-muted small mb-0">Use el botón "Nueva Sede" para registrar la primera sede.</p>
</div>
{% endif %}
