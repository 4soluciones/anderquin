<div class="row mx-0 mx-md-1 mt-0">
    <div class="col-12 p-0 p-md-1">
        <div class="card border-0 shadow-sm p-0 overflow-hidden" style="border-radius: 12px;">
            <div class="table-responsive">
            <table class="table table-hover table-sm table-bordered mb-0 align-middle" id="id-table-detail-order" style="width: 100%; border-color: #bbdefb !important;">
                <thead class="text-uppercase small text-center" style="background: linear-gradient(180deg, #bbe0f5 0%, #90caf9 100%);">
                <tr style="font-size: 0.75rem; letter-spacing: 0.5px; color: #0d47a1;">
                    <th scope="col" class="border-0 py-2 font-weight-bold" style="width: 5%; min-width: 35px;">#</th>
                    <th scope="col" class="border-0 py-2 font-weight-bold text-left" style="width: 40%; min-width: 120px;">Producto</th>
                    <th scope="col" class="border-0 py-2 font-weight-bold" style="width: 10%; min-width: 70px;">Cantidad</th>
                    <th scope="col" class="border-0 py-2 font-weight-bold" style="width: 10%; min-width: 65px;">Unidad</th>
                    <th scope="col" class="border-0 py-2 font-weight-bold" style="width: 10%; min-width: 60px;">Lote</th>
                    <th scope="col" class="border-0 py-2 font-weight-bold" style="width: 10%; min-width: 85px;">Precio Venta</th>
                    <th scope="col" class="border-0 py-2 font-weight-bold" style="width: 10%; min-width: 70px;">Total</th>
                    <th scope="col" class="border-0 py-2 font-weight-bold" style="width: 5%; min-width: 45px;">
                        <i class="fas fa-trash-alt fa-xs"></i>
                    </th>
                </tr>
                </thead>
                <tbody id="sales-details">
                {% if guide_detail_dict %}
                    {% for gd in guide_detail_dict %}
                        <tr guide_detail_id="{{ gd.id }}" product="{{ gd.product_id }}" store_p="{{ gd.store_product }}" pu="{{ gd.unit_id }}"
                            i="1" batch="{{ gd.batch_id }}"
                            class="text-uppercase small text-center" style="font-size: 14px;">
                            <td class="align-middle">{{ forloop.counter }}</td>
                            <td class="align-middle text-left item-product">
                                <input type="text"
                                       class="form-control form-control-sm input-product-name"
                                       value="{{ gd.product_name }}">
                            </td>
                            <td class="align-middle item-quantity">
                                <input type="text"
                                       class="form-control form-control-sm text-right input-quantity" disabled
                                       value="{{ gd.quantity }}">
                            </td>
                            <td class="align-middle item-unit" pu="{{ gd.unit_id }}"
                                unit_min="{{ gd.quantity_minimum }}">
                                <select class="form-control form-control-sm select-unit" 
                                        data-product="{{ gd.product_id }}" 
                                        data-original-unit="{{ gd.unit_id }}">
                                    {% for unit_id, unit_name in gd.product_units %}
                                        <option value="{{ unit_id }}" 
                                                {% if unit_id == gd.unit_id %}selected{% endif %}>
                                            {{ unit_name }}
                                        </option>
                                    {% endfor %}
                                </select>
                            </td>
                            <td class="align-middle item-batch" batch="{{ gd.batch_id }}">
                                <span class="bg-warning font-weight-bold">{{ gd.batch_number }}</span>
                            </td>
                            <td class="align-middle item-price">
                                <input type="text"
                                       class="form-control form-control-sm text-right input-price"
                                       value="{{ gd.price_sale }}">
                            </td>
                            <td class="align-middle item-total">
                                <input type="text"
                                       class="form-control form-control-sm text-right input-total-detail"
                                       value="{{ gd.subtotal }}">
                            </td>
                            <td class="align-middle"></td>
                        </tr>
                    {% endfor %}
                {% endif %}
                </tbody>
            </table>
            </div>
        </div>
        <div class="card border-0 shadow-sm mt-2 overflow-hidden" style="border-radius: 12px; background-color: #f0f8fc;">
            <div class="card-body py-2 py-md-3 px-2 px-md-3">
                <div class="row align-items-center no-gutters">
                    <div class="col-12 col-md-6 col-lg-8 order-2 order-md-1">
                        <div class="font-weight-normal m-0 p-0" id="id_table_client"></div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-4 order-1 order-md-2">
                        <div class="row align-items-center no-gutters">
                            <div class="col-6 col-md-7 text-right pr-2">
                                <label for="sum-total" class="roboto-condensed-regular mb-0 font-weight-bold small text-uppercase" style="color: #0d47a1;">Total S/</label>
                            </div>
                            <div class="col-6 col-md-5">
                                <input type="text"
                                       class="form-control form-control-sm sum-total text-right font-weight-bold border-2"
                                       id="sum-total"
                                       value="{{ total }}"
                                       name="sum-total" style="font-size: 1rem; min-width: 90px;"
                                       placeholder="0.00" readonly>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
