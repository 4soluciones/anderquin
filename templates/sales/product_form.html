<div class="product-form-wrapper roboto-condensed-regular">
    <div class="row no-gutters">
        <!-- Columna izquierda: datos del producto -->
        <div class="col-12 col-lg-7 pr-lg-3">
            <!-- Sección: Datos básicos -->
            <div class="form-section mb-4">
                <div class="form-section-header">
                    <i class="fas fa-tag mr-2"></i>Datos básicos
                </div>
                <div class="form-section-body">
                    <div class="form-group">
                        <label for="id_name" class="form-label">{{ form.name.label }}</label>
                        {{ form.name }}
                        {% for error in form.name.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="id_code" class="form-label">{{ form.code.label }}</label>
                            {{ form.code }}
                        </div>
                        <div class="form-group col-md-6">
                            <label for="id_internal_code" class="form-label">{{ form.internal_code.label }}</label>
                            {{ form.internal_code }}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección: Stock y medidas -->
            <div class="form-section mb-4">
                <div class="form-section-header">
                    <i class="fas fa-boxes mr-2"></i>Stock y medidas
                </div>
                <div class="form-section-body">
                    <div class="form-row">
                        <div class="form-group col-6 col-md-3">
                            <label for="id_stock_min" class="form-label">{{ form.stock_min.label }}</label>
                            {{ form.stock_min }}
                        </div>
                        <div class="form-group col-6 col-md-3">
                            <label for="id_stock_max" class="form-label">{{ form.stock_max.label }}</label>
                            {{ form.stock_max }}
                        </div>
                        <div class="form-group col-12 col-md-6">
                            <label for="id_weight" class="form-label">{{ form.weight.label }}</label>
                            <div class="input-group">
                                {{ form.weight }}
                                <div class="input-group-append">
                                    <span class="input-group-text bg-light">gr</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección: Clasificación -->
            <div class="form-section mb-4">
                <div class="form-section-header">
                    <i class="fas fa-sitemap mr-2"></i>Clasificación
                </div>
                <div class="form-section-body">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="id_product_family" class="form-label">{{ form.product_family.label }}</label>
                            {{ form.product_family }}
                        </div>
                        <div class="form-group col-md-6">
                            <label for="id_product_brand" class="form-label">{{ form.product_brand.label }}</label>
                            {{ form.product_brand }}
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="id_product_subcategory" class="form-label">{{ form.product_subcategory.label }}</label>
                        {{ form.product_subcategory }}
                    </div>
                    <div class="form-group mb-0">
                        <label for="id_observation" class="form-label">{{ form.observation.label }}</label>
                        {{ form.observation }}
                    </div>
                </div>
            </div>
        </div>

        <!-- Columna derecha: imagen y opciones -->
        <div class="col-12 col-lg-5 pl-lg-0">
            <div class="form-section mb-4">
                <div class="form-section-header">
                    <i class="fas fa-image mr-2"></i>Imagen
                </div>
                <div class="form-section-body text-center">
                    <label class="product-photo-upload border rounded" for="id_photo">
                        {% if object and object.photo %}
                            <img id="blah" class="img-fluid rounded" src="{{ object.photo.url }}" alt="Producto">
                        {% else %}
                            <img id="blah" class="img-fluid rounded" src="/mediafiles/product/default-placeholder_GdlsVB9.png" alt="Sin imagen">
                        {% endif %}
                    </label>
                    <div class="custom-file mt-2 mx-auto" style="max-width: 220px;">
                        {{ form.photo }}
                        <label class="custom-file-label text-left" for="id_photo">
                            {% if object and object.photo %}{{ object.photo.name|default:"Cambiar imagen" }}{% else %}{{ form.photo.label }}{% endif %}
                        </label>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="form-section-header">
                    <i class="fas fa-cog mr-2"></i>Opciones
                </div>
                <div class="form-section-body">
                    <div class="form-check mb-2">
                        {{ form.is_enabled }}
                        <label class="form-check-label" for="id_is_enabled">{{ form.is_enabled.label }}</label>
                    </div>
                    <div class="form-check mb-2">
                        {{ form.is_merchandise }}
                        <label class="form-check-label" for="id_is_merchandise">{{ form.is_merchandise.label }}</label>
                    </div>
                    <div class="form-check mb-0">
                        {{ form.is_purchased }}
                        <label class="form-check-label" for="id_is_purchased">{{ form.is_purchased.label }}</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    #id_photo { position: absolute; width: 0.1px; height: 0.1px; opacity: 0; overflow: hidden; z-index: -1; }
    .product-photo-upload { cursor: pointer; display: inline-block; padding: 0.5rem; background: #f0f8fc; transition: background 0.2s; }
    .product-photo-upload:hover { background: #e3f2fd; }
    .product-photo-upload img { height: 160px; width: auto; max-width: 100%; object-fit: contain; }
    .custom-file-label { padding: 0.375rem 0.75rem; color: #495057; font-size: 0.875rem; }
    .form-section { background: #fff; border-radius: 12px; overflow: hidden; box-shadow: 0 1px 4px rgba(30, 58, 95, 0.08); border: 1px solid #e3f2fd; }
    .form-section-header { background: linear-gradient(180deg, #e3f2fd 0%, #bbdefb 100%); color: #0d47a1; font-weight: 600; padding: 0.6rem 1rem; font-size: 0.9rem; }
    .form-section-body { padding: 1rem 1.25rem; }
    .form-label { font-weight: 600; color: #1565c0; font-size: 0.875rem; margin-bottom: 0.35rem; }
    .product-form-wrapper .form-control { border-radius: 8px; border-color: #bbdefb; font-size: 0.875rem; }
    .product-form-wrapper .form-control:focus { border-color: #1e3a5f; box-shadow: 0 0 0 0.2rem rgba(30, 58, 95, 0.2); }
    .product-form-wrapper select.form-control { cursor: pointer; }
</style>
