{% extends 'home.html' %}
{% load static %}
{% block title %}Ingreso directo a almacén{% endblock title %}

{% block body %}
<div class="container-fluid py-2 roboto-condensed-regular" style="background-color: #e8f4f8; min-height: 100vh;">
    <div class="card border-0 shadow-lg mb-4 overflow-hidden" style="border-radius: 15px;">
        <div class="card-header py-3" style="background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h3 class="text-white mb-0 font-weight-bold">
                        <i class="fas fa-box-open mr-2"></i> INGRESO DIRECTO A ALMACÉN
                    </h3>
                </div>
                <div class="col-md-4 text-right">
                    <a href="{% url 'comercial:transfer_list' %}" class="btn btn-outline-light btn-sm border-2 rounded-pill">
                        <i class="fas fa-exchange-alt"></i> Transferencias
                    </a>
                </div>
            </div>
        </div>
        <div class="card-body p-4" style="background-color: #e3f2fd;">
            {% if error %}
            <div class="alert alert-danger">{{ error }}</div>
            {% endif %}
            {% if success %}
            <div class="alert alert-success">{{ success }}</div>
            {% endif %}
            <form method="post" action="{% url 'comercial:direct_input_warehouse' %}" class="rounded p-4" style="background-color: #f0f8fc; border: 1px solid #bbdefb;">
                {% csrf_token %}
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label class="small font-weight-bold text-uppercase text-muted">Almacén</label>
                        <select name="store_id" class="form-control border rounded" style="border-color: #bbdefb !important;" required>
                            <option value="">Seleccione...</option>
                            {% for s in stores %}
                            <option value="{{ s.id }}">{{ s.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label class="small font-weight-bold text-uppercase text-muted">Producto</label>
                        <select name="product_id" class="form-control border rounded" style="border-color: #bbdefb !important;" required>
                            <option value="">Seleccione...</option>
                            {% for p in products %}
                            <option value="{{ p.id }}">{{ p.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-2 mb-3">
                        <label class="small font-weight-bold text-uppercase text-muted">Cantidad</label>
                        <input type="number" name="quantity" class="form-control border rounded" step="0.01" min="0.01" required style="border-color: #bbdefb !important;">
                    </div>
                    <div class="col-md-2 mb-3">
                        <label class="small font-weight-bold text-uppercase text-muted">P. unit. S/</label>
                        <input type="text" name="unit_price" class="form-control border rounded" value="0" style="border-color: #bbdefb !important;">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <label class="small font-weight-bold text-uppercase text-muted">Nº Lote (opcional)</label>
                        <input type="text" name="batch_number" class="form-control border rounded" placeholder="Ej: L-2024-001" style="border-color: #bbdefb !important;">
                    </div>
                    <div class="col-md-3 mb-3">
                        <label class="small font-weight-bold text-uppercase text-muted">Venc. lote (opcional)</label>
                        <input type="date" name="batch_expiration" class="form-control border rounded" style="border-color: #bbdefb !important;">
                    </div>
                    <div class="col-md-3 mb-3">
                        <label class="small font-weight-bold text-uppercase text-muted">&nbsp;</label>
                        <button type="submit" class="btn btn-primary btn-block rounded" style="background: #1565c0;">
                            <i class="fas fa-save"></i> Registrar ingreso
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<style>
    .form-control:focus { box-shadow: 0 0 0 0.2rem rgba(30, 58, 95, 0.25); border-color: #1e3a5f; }
</style>
{% endblock body %}
